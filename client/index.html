<!DOCTYPE html>
<html>
<head>
<body>
<style>
#one, #two{
display: none;
}
</style>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script>

// this function fun1() is for creating a new application /////////////
function fun1(){
$.ajax({
    type:'POST',
    url:'https://api.plivo.com/v1/Account/MAOTU3YMVJOGIXMJNKOT/Application/?answer_url=Hello, thanks for call&app_name=new',
    contentType:'application/json',
    beforeSend: function(xhr) {
    xhr.setRequestHeader("Authorization", "Basic TUFPVFUzWU1WSk9HSVhNSk5LT1Q6Wm1FNE1qZ3lOekV6TXpWaE5tUm1NREEwTkRZME5qWXdaVGxqTlRrMQ==");
  },
    success: function(returnedData){
         console.info(returnedData);
         document.getElementById("container").innerHTML = JSON.stringify(returnedData,null,4);

     },
     error: function(err){
        console.warn(err);
     }
});
}
////////////////////////////////////////////////////////////////////////

// this function fun2() is for listing all the applications /////////////
function fun2(){
$.ajax({
    type:'GET',
    url:'https://api.plivo.com/v1/Account/MAOTU3YMVJOGIXMJNKOT/Application/',
    contentType:'application/json',
    beforeSend: function(xhr) {
    xhr.setRequestHeader("Authorization", "Basic TUFPVFUzWU1WSk9HSVhNSk5LT1Q6Wm1FNE1qZ3lOekV6TXpWaE5tUm1NREEwTkRZME5qWXdaVGxqTlRrMQ==");
  },
    success: function(returnedData){
         console.info(returnedData);
         document.getElementById("container").innerHTML = JSON.stringify(returnedData,null,4);
     },
     error: function(err){
        console.warn(err);
     }
});
}
////////////////////////////////////////////////////////////////////////////

// this function fun3() is for editing an application //////////////////////
function fun3(){
$.ajax({
    type:'POST',
    url:'https://api.plivo.com/v1/Account/MAOTU3YMVJOGIXMJNKOT/Application/20372631212782780/',
    contentType:'application/json',
    beforeSend: function(xhr) {
    xhr.setRequestHeader("Authorization", "Basic TUFPVFUzWU1WSk9HSVhNSk5LT1Q6Wm1FNE1qZ3lOekV6TXpWaE5tUm1NREEwTkRZME5qWXdaVGxqTlRrMQ==");
  },
    success: function(returnedData){
        console.info(returnedData);
        document.getElementById("container").innerHTML = JSON.stringify(returnedData,null,4);
     },
     error: function(err){
        console.warn(err);
     }
});
}
//////////////////////////////////////////////////////////////////////////////

// this function fun4() is for deleting an application ///////////////////////
function fun4(){
$.ajax({
    type:'DELETE',
    url:'https://api.plivo.com/v1/Account/MAOTU3YMVJOGIXMJNKOT/Application/20372631212782780/',
    contentType:'application/json',
    beforeSend: function(xhr) {
    xhr.setRequestHeader("Authorization", "Basic TUFPVFUzWU1WSk9HSVhNSk5LT1Q6Wm1FNE1qZ3lOekV6TXpWaE5tUm1NREEwTkRZME5qWXdaVGxqTlRrMQ==");
  },
    success: function(returnedData){
         console.info(returnedData);
        document.getElementById("container").innerHTML = JSON.stringify(returnedData,null,4);
     },
     error: function(err){
        console.warn(err);
     }
});
}
///////////////////////////////////////////////////////////////////////////////////////

//////// function fun5() for second option///////////////////////////////////////////////
function fun5(){
    var num = document.getElementById("num").value; // get user entered number in "num"

    // Get the details of applications to check whether it already exists or not
    $.ajax({
    type:'GET',
    url:'https://api.plivo.com/v1/Account/MAOTU3YMVJOGIXMJNKOT/Number/',
    contentType:'application/json',
    beforeSend: function(xhr) {
    xhr.setRequestHeader("Authorization", "Basic TUFPVFUzWU1WSk9HSVhNSk5LT1Q6Wm1FNE1qZ3lOekV6TXpWaE5tUm1NREEwTkRZME5qWXdaVGxqTlRrMQ==");
  },
    success: function(returnedData){
         console.info(returnedData);
         // Iterate through the details to check the existence of the num.
         for(var i=0;i<returnedData.objects.length;++i){
            if(returnedData.objects[i].number == num){
                // num found, show the app
                $.ajax({
    type:'GET',
    url:'https://api.plivo.com/v1/Account/MAOTU3YMVJOGIXMJNKOT/Number/',
    contentType:'application/json',
    beforeSend: function(xhr) {
    xhr.setRequestHeader("Authorization", "Basic TUFPVFUzWU1WSk9HSVhNSk5LT1Q6Wm1FNE1qZ3lOekV6TXpWaE5tUm1NREEwTkRZME5qWXdaVGxqTlRrMQ==");
  },
    success: function(returnedData){
         console.info(returnedData);
        document.getElementById("container").innerHTML = JSON.stringify(returnedData,null,4);
     },
     error: function(err){
        console.warn(err);
     }
});
    }else{
                // num not found, create the app
                $.ajax({
    type:'POST',
    url:'https://api.plivo.com/v1/Account/MAOTU3YMVJOGIXMJNKOT/Application/?answer_url=Hello, thanks for call&app_name=new',
    contentType:'applicatio/json',
    beforeSend: function(xhr) {
    xhr.setRequestHeader("Authorization", "Basic TUFPVFUzWU1WSk9HSVhNSk5LT1Q6Wm1FNE1qZ3lOekV6TXpWaE5tUm1NREEwTkRZME5qWXdaVGxqTlRrMQ==");
  },
    success: function(returnedData){
         console.info(returnedData);
         document.getElementById("container").innerHTML = JSON.stringify(returnedData,null,4);
     },
     error: function(err){
        console.warn(err);
     }
});
            }
         }

     },
     error: function(err){
        console.warn(err);
     }
});
}
//////////////////////////////////////////////////////////////////////////////////////////

///////// these two functions are used to display one set of elements at a time
function one(){
document.getElementById("one").style.display = 'block';
document.getElementById("two").style.display = 'none';
}

function two(){
document.getElementById("one").style.display = 'none';
document.getElementById("two").style.display = 'block';
}
////////////////////////////////////////////////////////////////////////////////
</script>
<input type="button" value="Number" onclick="one();"/>
<input type="button" value="App" onclick="two();"/>
<br><hr>

<div id="one">
<input type="button" onclick="fun1();" value="Create"> </input>
<input type="button" onclick="fun2();" value="List"> </input>
<input type="button" onclick="fun3();" value="Edit"> </input>
<input type="button" onclick="fun4();" value="Delete"> </input>
</div>
<div id="two">
<input type="number" placeholder="Enter App no." id = "num"></input>
<input type="button" onclick="fun5();" value="Check"> </input>
</div>
<div id="container"></div>
</body>
</body>
</head>
</html>